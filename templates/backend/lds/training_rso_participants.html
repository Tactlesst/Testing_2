{% if rso and rso.training %}
<div class="mb-3">
    <h5 class="font-weight-bold">{{ rso.training.tt_name }}</h5>
</div>
{% endif %}

<div class="mb-3">
    <h6 class="font-weight-bold">Facilitators Assigned</h6>
    <div class="table-responsive">
        <table class="table table-bordered table-hover ldi-facilitators-table" width="100%">
            <thead>
                <tr>
                    <th width="20%" class="text-center">Type</th>
                    <th>Facilitator</th>
                </tr>
            </thead>
            <tbody>
                {% if facilitators %}
                    {% for f in facilitators %}
                        <tr>
                            <td class="text-center">{% if f.is_external %}External{% else %}Internal{% endif %}</td>
                            <td>
                                {% if f.is_external %}
                                    {{ f.rp_name|default_if_none:"" }}
                                {% else %}
                                    {% if f.emp and f.emp.pi and f.emp.pi.user %}{{ f.emp.pi.user.get_fullname }}{% endif %}
                                {% endif %}
                            </td>
                        </tr>
                    {% endfor %}
                {% else %}
                    <tr>
                        <td class="text-center"></td>
                        <td class="text-center">No facilitators assigned.</td>
                    </tr>
                {% endif %}
            </tbody>
        </table>
    </div>
</div>

<div class="table-responsive">
    <table class="table table-bordered table-hover ldi-participants-table" width="100%">
        <thead>
            <tr>
                <th width="20%" class="text-center">Type</th>
                <th>Participant</th>
            </tr>
        </thead>
        <tbody>
            {% if internal_participants %}
                {% for p in internal_participants %}
                    <tr>
                        <td class="text-center">Internal</td>
                        <td>{% if p.emp and p.emp.pi and p.emp.pi.user %}{{ p.emp.pi.user.get_fullname }}{% endif %}</td>
                    </tr>
                {% endfor %}
            {% endif %}

            {% if external_participants %}
                {% for p in external_participants %}
                    <tr>
                        <td class="text-center">External</td>
                        <td>{{ p.participants_name|default_if_none:"" }}</td>
                    </tr>
                {% endfor %}
            {% endif %}

            {% if not internal_participants and not external_participants %}
                <tr>
                    <td class="text-center"></td>
                    <td class="text-center">No participants found.</td>
                </tr>
            {% endif %}
        </tbody>
    </table>
</div>
